{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-test_4/./src/js/MessageContainer.js","webpack://ahj-test_4/./src/js/app.js","webpack://ahj-test_4/./src/js/Validator.js","webpack://ahj-test_4/./src/js/validateCardNumber.js","webpack://ahj-test_4/./src/index.js"],"sourcesContent":["export default class MessageContainer {\n  constructor (parentEl) {\n    this.parentEl = parentEl\n  }\n\n  static get markup () {\n    return `\n<div class=\"modal\">\n    <div class=\"modal__content\">\n        <button class=\"modal-close__btn\"></button>\n        <h3 class=\"modal__description\"></h3>\n    </div>\n</div>\n`\n  }\n\n  redrawModalMessage () {\n    this.parentEl.insertAdjacentHTML('afterbegin', this.constructor.markup)\n    this.modalButtonEl.addEventListener('click', () => this.closeModal())\n  }\n\n  showMessage (message) {\n    this.modalWrapperEl.classList.add('modal-active')\n    this.modalDescription = message\n  }\n\n  get modalWrapperEl () {\n    return this.parentEl.querySelector('.modal')\n  }\n\n  get modalContentEl () {\n    return this.parentEl.querySelector('.modal__content')\n  }\n\n  get modalButtonEl () {\n    return this.parentEl.querySelector('.modal-close__btn')\n  }\n\n  get modalDescription () {\n    return this.parentEl.querySelector('.modal__description').textContent\n  }\n\n  set modalDescription (text) {\n    this.parentEl.querySelector('.modal__description').textContent = text\n  }\n\n  closeModal () {\n    this.modalWrapperEl.classList.remove('modal-active')\n  }\n}\n","import Validator from './Validator'\n\nconst container = document.querySelector('.validate-card-widjet')\n\nconst validator = new Validator(container)\n\nvalidator.init()\n","import MessageContainer from './MessageContainer'\nimport { validateCardNumber, checkPayment } from './validateCardNumber'\n\nexport default class Validator {\n  constructor (container) {\n    this.container = container\n    this.modalMessage = new MessageContainer(container)\n    this.inputEl = document.querySelector('.input-card-number')\n    this.cards = [...document.querySelectorAll('.card-img')]\n  }\n\n  init () {\n    this.modalMessage.redrawModalMessage()\n\n    this.inputEl.addEventListener('input', this.onInput.bind(this))\n\n    this.validateButton = this.container.querySelector('.validate-button')\n\n    this.validateButton.addEventListener('click', this.onSubmit.bind(this))\n  }\n\n  onSubmit (event) {\n    event.preventDefault()\n    this.cards.forEach((el) => el.classList.remove('card-img-filter'))\n\n    const isNumber = /^[0-9]+$/.test(parseInt(this.inputEl.value, 10))\n    if (!isNumber) {\n      this.modalMessage.showMessage('Enter only number 0...9')\n      this.inputEl.value = ''\n      return\n    }\n\n    if (!this.inputEl.value || this.inputEl.value.length < 14) {\n      this.modalMessage.showMessage('Very short number...')\n      this.inputEl.value = ''\n      return\n    }\n\n    const isValid = validateCardNumber(this.inputEl.value)\n    if (isValid) {\n      this.modalMessage.showMessage('is Valid')\n    } else {\n      this.modalMessage.showMessage('is not Valid')\n    }\n    this.inputEl.value = ''\n  }\n\n  onInput (event) {\n    event.preventDefault()\n    const { value } = this.inputEl\n    if (value !== '') {\n      this.cards.forEach((el) => el.classList.add('card-img-filter'))\n      const check = checkPayment(value)\n      this.showPaymentSystem(check)\n    } else {\n      this.cards.forEach((el) => el.classList.remove('card-img-filter'))\n    }\n  }\n\n  showPaymentSystem (value) {\n    const checkEl = this.cards.find((el) => el.classList.contains(value))\n    if (checkEl) checkEl.classList.remove('card-img-filter')\n  }\n}\n","import verify from '../json/verificationPayments.json'\n\nexport function validateCardNumber (cardNumber) {\n  let sum = null\n  for (let i = 0; i < cardNumber.length; i += 1) {\n    let result = parseInt(cardNumber[i], 10)\n\n    if ((cardNumber.length - i) % 2 === 0) {\n      result *= 2\n      if (result > 9) {\n        result -= 9\n      }\n    }\n    sum += result\n  }\n  return sum % 10 === 0\n}\n\nexport function checkPayment (cardNumber) {\n  // проверка наименования платежной системы\n  const value = verify\n  for (const [paymentName, IDs] of Object.entries(value)) {\n    for (const ID of IDs) {\n      if (cardNumber.startsWith(ID)) {\n        return paymentName.toLowerCase()\n      }\n    }\n  }\n  return false\n}\n","import './css/style.css'\n\nimport './js/app'\n\nconsole.log('Start')\n"],"names":["MessageContainer","constructor","parentEl","this","markup","redrawModalMessage","insertAdjacentHTML","modalButtonEl","addEventListener","closeModal","showMessage","message","modalWrapperEl","classList","add","modalDescription","querySelector","modalContentEl","textContent","text","remove","container","document","validator","modalMessage","inputEl","cards","querySelectorAll","init","onInput","bind","validateButton","onSubmit","event","preventDefault","forEach","el","test","parseInt","value","length","cardNumber","sum","i","result","validateCardNumber","check","verify","paymentName","IDs","Object","entries","ID","startsWith","toLowerCase","checkPayment","showPaymentSystem","checkEl","find","contains","console","log"],"sourceRoot":""}